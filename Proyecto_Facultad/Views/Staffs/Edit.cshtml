@model Proyecto_Facultad.Models.Staff

@{
    ViewData["Title"] = "Editar Staff";
}

<h2 class="text-primary">Editar Staff</h2>

<form asp-action="Edit" method="post">
    <input type="hidden" asp-for="IdStaff" />

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="PrimerNombreStaff" class="form-label"></label>
                <input asp-for="PrimerNombreStaff" class="form-control" />
                <span asp-validation-for="PrimerNombreStaff" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="SegundoNombreStaff" class="form-label"></label>
                <input asp-for="SegundoNombreStaff" class="form-control" />
                <span asp-validation-for="SegundoNombreStaff" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="PrimerApellidoStaff" class="form-label"></label>
                <input asp-for="PrimerApellidoStaff" class="form-control" />
                <span asp-validation-for="PrimerApellidoStaff" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="SegundoApellidoStaff" class="form-label"></label>
                <input asp-for="SegundoApellidoStaff" class="form-control" />
                <span asp-validation-for="SegundoApellidoStaff" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="ApellidoCasado" class="form-label"></label>
                <input asp-for="ApellidoCasado" class="form-control" />
                <span asp-validation-for="ApellidoCasado" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="FechaNacimientoStaff" class="form-label"></label>
                <input asp-for="FechaNacimientoStaff" type="date" class="form-control" />
                <span asp-validation-for="FechaNacimientoStaff" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="FechaBautizoStaff" class="form-label"></label>
                <input asp-for="FechaBautizoStaff" type="date" class="form-control" />
                <span asp-validation-for="FechaBautizoStaff" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Direccion" class="form-label"></label>
                <input asp-for="Direccion" class="form-control" />
                <span asp-validation-for="Direccion" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label asp-for="Telefono" class="form-label"></label>
        <input asp-for="Telefono" class="form-control" />
        <span asp-validation-for="Telefono" class="text-danger" maxlength="13" minlength="13" pattern="\d{13}"></span>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Dpi" class="form-label"></label>
                <input asp-for="Dpi" class="form-control" />
                <span asp-validation-for="Dpi" class="text-danger" maxlength="13" minlength="13" pattern="\d{13}"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Nit" class="form-label"></label>
                <input asp-for="Nit" class="form-control" />
                <span asp-validation-for="Nit" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="EstadoCivil" class="form-label"></label>
                <select asp-for="EstadoCivil" class="form-control">
                    <option value="">Seleccione</option>
                    <option value="Soltero" selected="@Model.EstadoCivil == " Soltero"">Soltero</option>
                    <option value="Casado" selected="@Model.EstadoCivil == " Casado"">Casado</option>
                </select>
                <span asp-validation-for="EstadoCivil" class="text-danger"></span>
            </div>
        </div>
        <div class="col-md-6">
            <div class="form-group">
                <label asp-for="Genero" class="form-label"></label>
                <select asp-for="Genero" class="form-control">
                    <option value="">Seleccione</option>
                    <option value="Masculino" selected="@Model.Genero == " Masculino"">Masculino</option>
                    <option value="Femenino" selected="@Model.Genero == " Femenino"">Femenino</option>
                </select>
                <span asp-validation-for="Genero" class="text-danger"></span>
            </div>
        </div>
    </div>

    <div class="form-group">
        <label asp-for="NumeroCelula" class="form-label"></label>
        <input asp-for="NumeroCelula" class="form-control" />
        <span asp-validation-for="NumeroCelula" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="NivelAprobado" class="form-label"></label>
        <input asp-for="NivelAprobado" class="form-control" />
        <span asp-validation-for="NivelAprobado" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="CodigoFrater" class="form-label"></label>
        <input asp-for="CodigoFrater" class="form-control" />
        <span asp-validation-for="CodigoFrater" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label class="form-label">Estatus Staff</label>
        <div class="form-check">
            <input type="checkbox" asp-for="EstatusStaff" class="form-check-input" />
            <label class="form-check-label">Activo</label>
        </div>
        <span asp-validation-for="EstatusStaff" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="IdUsuario" class="form-label"></label>
        <select asp-for="IdUsuario" class="form-control" asp-items="ViewBag.Usuarios">
            <option value="">Seleccione</option>
        </select>
        <span asp-validation-for="IdUsuario" class="text-danger"></span>
    </div>

    <div class="form-group d-flex">
        <button type="submit" class="btn btn-primary flex-fill me-2">Guardar</button>
        <a asp-action="Index" class="btn btn-danger flex-fill">Cancelar</a>
    </div>
</form>

@section scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.querySelector('form').addEventListener('submit', function (event) {
            var fechaNacimientoInput = document.getElementById('fechaNacimiento');
            var fechaNacimientoError = document.getElementById('fechaNacimientoError');
            var fechaBautizoInput = document.getElementById('fechaBautizo');
            var fechaBautizoError = document.getElementById('fechaBautizoError');
            var telefonoInput = document.getElementById('telefono');
            var telefonoError = document.getElementById('telefonoError');

            var fechaNacimiento = new Date(fechaNacimientoInput.value);
            var fechaBautizo = new Date(fechaBautizoInput.value);
            var today = new Date();
            today.setHours(0, 0, 0, 0);

            var valid = true;

            if (fechaNacimiento > today) {
                fechaNacimientoError.textContent = "La fecha de nacimiento no puede ser mayor que la fecha actual.";
                valid = false;
            } else {
                fechaNacimientoError.textContent = "";
            }

            if (fechaBautizo && fechaBautizo > today) {
                fechaBautizoError.textContent = "La fecha de bautizo no puede ser mayor que la fecha actual.";
                valid = false;
            } else {
                fechaBautizoError.textContent = "";
            }

            var telefono = telefonoInput.value;
            if (telefono.length !== 8) {
                telefonoError.textContent = "El teléfono debe tener exactamente 8 dígitos.";
                valid = false;
            } else {
                telefonoError.textContent = "";
            }

            if (!valid) {
                event.preventDefault();
            }
        });
    </script>
}
